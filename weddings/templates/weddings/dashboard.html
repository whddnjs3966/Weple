{% extends "base.html" %}
{% load static humanize %}

{% block title %}대시보드 - Weple{% endblock %}

{% block nav_center %}
<nav <nav
    class="flex items-center gap-1 p-0.5 bg-black/5 rounded-full backdrop-blur-md border border-black/5 shadow-inner">
    <a href="{% url 'schedule_list' %}"
        class="px-3 py-1.5 rounded-full text-gray-600 hover:text-gray-900 hover:bg-black/5 text-xs font-bold transition-all">Schedule</a>
    <a href="{% url 'checklist_manage' %}"
        class="px-3 py-1.5 rounded-full text-gray-600 hover:text-gray-900 hover:bg-black/5 text-xs font-bold transition-all">Checklist</a>
    <a href="{% url 'vendor_main' %}"
        class="px-3 py-1.5 rounded-full text-gray-600 hover:text-gray-900 hover:bg-black/5 text-xs font-bold transition-all">Vendor</a>
    <a href="{% url 'community_main' %}"
        class="px-3 py-1.5 rounded-full text-gray-600 hover:text-gray-900 hover:bg-black/5 text-xs font-bold transition-all">Community</a>
</nav>
{% endblock %}

{% block content %}
<!-- 
    COSMOS STYLE DASHBOARD 
    - Full Screen Immersive Hero
    - Floating Glass Cards
    - Centered D-Day
-->

<div class="fixed inset-0 bg-[#050505] overflow-hidden">
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80"
            class="w-full h-full object-cover opacity-60 scale-105 animate-slow-zoom">
        <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/10 to-black/40"></div>

        <!-- Animated Particles / Stars -->
        <div class="cosmos-particles"></div>
    </div>

    <!-- Center Content -->
    <div class="relative z-20 flex flex-col items-center justify-center h-full text-center px-4">

        <!-- D-Day Counter -->
        {% if d_day is not None %}
        <div class="animate-fade-in-up">
            <p class="text-white/60 text-sm tracking-[0.3em] font-medium mb-4 uppercase">Your Beautiful Journey</p>
            <h1
                class="font-serif text-8xl md:text-[10rem] font-bold text-transparent bg-clip-text bg-gradient-to-b from-white to-white/60 drop-shadow-2xl mb-2 tracking-tight leading-none">
                D-{{ d_day }}
            </h1>
            <div class="mt-6 font-serif text-4xl md:text-6xl text-white/90 tracking-[0.2em] font-light">
                {{ group.wedding_date|date:"Y.m.d" }}
            </div>
        </div>
        {% else %}
        <div class="animate-fade-in-up">
            <h1 class="font-serif text-6xl md:text-8xl font-bold text-white mb-6">Welcome to Weple</h1>
            <a href="#" data-bs-toggle="modal" data-bs-target="#profileUpdateModal"
                class="inline-block px-8 py-4 rounded-full bg-white text-black font-bold text-lg hover:scale-105 transition-transform">
                Set Your Date
            </a>
        </div>
        {% endif %}

    </div>

    <div class="absolute inset-0 z-10 pointer-events-none overflow-hidden">

        <!-- Card 1: Schedule -->
        <div class="cosmos-card cosmos-card--1">
            <div class="glass-panel p-4 flex items-center gap-3 hover:bg-white/20 transition-colors">
                <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white">
                    <i class="bi bi-calendar-check"></i>
                </div>
                <div class="text-left">
                    <p class="text-[10px] text-white/60 uppercase tracking-wider">Next Event</p>
                    <p class="text-white text-sm font-bold">Dress Fitting</p>
                </div>
            </div>
        </div>

        <!-- Card 2: Budget -->
        <div class="cosmos-card cosmos-card--2">
            <div class="glass-panel p-4 flex flex-col items-center text-center hover:bg-white/20 transition-colors">
                <p class="text-[10px] text-white/60 uppercase tracking-wider mb-1">Budget Used</p>
                <div class="w-24 h-1 bg-white/20 rounded-full overflow-hidden mb-2">
                    <div class="h-full bg-white/80 w-1/3"></div>
                </div>
                <p class="text-white text-xs font-bold">35% Complete</p>
            </div>
        </div>
        <!-- Card 4: Checklist -->
        <div class="cosmos-card cosmos-card--4">
            <div class="glass-panel p-4 flex items-center gap-3 hover:bg-white/20 transition-colors">
                <div
                    class="w-8 h-8 rounded-full bg-[#FF8E8E] flex items-center justify-center text-white text-xs shadow-lg shadow-red-500/30">
                    5
                </div>
                <div class="text-left">
                    <p class="text-[10px] text-white/60 uppercase tracking-wider">To-Do</p>
                    <p class="text-white text-sm font-bold">New Tasks</p>
                </div>
            </div>
        </div>

        <!-- Card 5: Community -->
        <div class="cosmos-card cosmos-card--5">
            <div class="glass-panel p-3 flex items-center gap-2 hover:bg-white/20 transition-colors">
                <div class="flex -space-x-2">
                    <div class="w-6 h-6 rounded-full bg-gray-300 border border-white"></div>
                    <div class="w-6 h-6 rounded-full bg-gray-400 border border-white"></div>
                    <div class="w-6 h-6 rounded-full bg-gray-500 border border-white"></div>
                </div>
                <span class="text-white text-xs font-medium ml-1">+12 New</span>
            </div>
        </div>

        <!-- Card 8: Quote -->
        <div class="cosmos-card cosmos-card--8">
            <div class="glass-panel px-5 py-3 text-center">
                <p class="font-serif italic text-white/90 text-sm">"Together is a beautiful place to be"</p>
            </div>
        </div>

    </div>

</div>

<!-- CSS for Cosmos Animations -->
<style>
    /* ─── Global Overrides for this page ─── */
    /* Hide default navbar container background if needed, or rely on z-index */

    /* ─── Glass Panel ─── */
    .glass-panel {
        background: rgba(255, 255, 255, 0.08);
        /* Very transparent */
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease, border-color 0.3s ease;
    }

    .glass-panel:hover {
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(255, 255, 255, 0.3);
        transform: scale(1.02);
    }

    /* ─── Animations ─── */
    @keyframes slow-zoom {
        0% {
            transform: scale(1);
        }

        100% {
            transform: scale(1.1);
        }
    }

    .animate-slow-zoom {
        animation: slow-zoom 20s infinite alternate ease-in-out;
    }

    /* Floating Animation (Gentle Drift) */
    @keyframes float {

        0%,
        100% {
            transform: translate(0, 0);
        }

        33% {
            transform: translate(10px, -15px);
        }

        66% {
            transform: translate(-5px, 10px);
        }
    }

    .cosmos-card {
        position: absolute;
        animation: float 12s ease-in-out infinite;
        cursor: pointer;
        transition: z-index 0.2s;
    }

    .cosmos-card:hover {
        z-index: 50;
        animation-play-state: paused;
    }

    /* Positioning */
    .cosmos-card--1 {
        top: 20%;
        left: 20%;
        animation-delay: 0s;
    }

    .cosmos-card--2 {
        top: 75%;
        left: 15%;
        animation-delay: -2s;
    }

    .cosmos-card--3 {
        top: 15%;
        right: 15%;
        animation-delay: -4s;
    }

    .cosmos-card--4 {
        top: 65%;
        right: 20%;
        animation-delay: -1s;
    }

    .cosmos-card--5 {
        top: 40%;
        left: 10%;
        animation-delay: -5s;
    }

    .cosmos-card--6 {
        top: 35%;
        right: 8%;
        animation-delay: -3s;
    }

    .cosmos-card--7 {
        bottom: 15%;
        left: 50%;
        transform: translateX(-50%);
        animation-delay: -6s;
    }

    .cosmos-card--8 {
        top: 10%;
        left: 50%;
        transform: translateX(-50%);
        animation-delay: -2.5s;
    }


    /* Mobile Responsive Adjustments */
    @media (max-width: 768px) {
        .cosmos-card {
            display: none;
        }

        .cosmos-card--1 {
            display: block;
            top: 15%;
            left: 10%;
        }

        .cosmos-card--3 {
            display: block;
            top: 70%;
            right: 10%;
        }

        .cosmos-card--7 {
            display: block;
            bottom: 10%;
            left: 50%;
        }
    }
</style>

{% endblock %}